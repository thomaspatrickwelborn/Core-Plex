var e={default:(e,t)=>void 0===t?e:e[t],get:(e,t)=>void 0===t?e:e.get(t)};function t(e,t=":scope"){if(Array.isArray(e)||void 0===e)return e;const n=[];for(const[r,s]of Object.entries(e)){const e=r.trim().split(" ");let i,o,a,c;1===e.length?(i=t,o=e[0]):e.length>1&&(i=e[0],o=e[1]),Array.isArray(s)?(a=s[0],c=s[1]):a=s;const u={type:o,path:i,listener:a,enable:!1};n.push(u)}return n}const n={string:String,number:Number,boolean:Boolean,undefined:void 0,null:null},r=Object.keys(n),s=Object.values(n),i={object:Object,array:Array},o=Object.keys(i),a=Object.values(i),c=Object.assign({},n,i),u=Object.keys(c),l=Object.values(c),p=[n.String,n.Number,n.Boolean,i.Object,i.Array];var f=Object.freeze({__proto__:null,ObjectKeys:o,ObjectValues:a,Objects:i,PrimitiveKeys:r,PrimitiveValues:s,Primitives:n,TypeKeys:u,TypeMethods:p,TypeValues:l,Types:c}),g={quotationEscape:/\.(?=(?:[^"]*"[^"]*")*[^"]*$)/},h=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function d(e){return e.split(new RegExp(g.quotationEscape))}function b(e){const t=d(e);return t.pop(),t}function v(e){return d(e).pop()}function y(e){return d(e).shift()}function m(e){return Number(y(e))?"array":"object"}function j(e){return{subpaths:d(e),keypaths:b(e),key:v(e),root:y(e),typeofRoot:m(e)}}function E(e){let t;const n=h(e);if("string"===n){const n=e.toLowerCase();"object"===n?t={}:"array"===n&&(t=[])}else"object"===n?t={}:"array"===n&&(t=[]);return t}function O(e,t){const n=e.split(new RegExp(g.quotationEscape)),r=n.pop();let s=t;for(const e of n)s=s[e];return s[r]}function D(e,t){const{keypaths:n,key:r,typeofRoot:s}=j(e),i=E(s);let o=i;for(const e of n)Number(e)?o[e]=[]:o[e]={},o=o[e];return o[r]=t,i}var k=e=>{let t;const n=h(e);if("array"===n)t=!0;else if("object"===n&&Number.isInteger(e.length)&&e.length>=0){e:for(const n of Object.keys(Object.getOwnPropertyDescriptors(e)))if("length"!==n&&(t=!isNaN(n),!t))break e}else t=!1;return t};const w={depth:0,maxDepth:10,accessors:[e.default]};function P(e,t){const n=[],r=Object.assign({},w,t);if(r.depth++,r.depth>r.maxDepth)return n;for(const t of r.accessors){const s=t.bind(e)(e);if(s)for(const[e,t]of Object.entries(s))if(r.values?r.values&&n.push([e,t]):n.push(e),"object"==typeof t&&null!==t&&t!==s){const s=P(t,r);if(r.values){if(r.values)for(const[t,r]of s){const s=[e,t].join(".");n.push([s,r])}}else for(const t of s){const r=[e,t].join(".");n.push(r)}}}return n}function x(e,...t){if(!e)return e;for(const n of t)if(n)for(const[t,r]of Object.entries(n)){const n=h(e[t]),s=h(r);e[t]="object"===n&&"object"===s?x(e[t],r):r}return e}function C(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return["array","object"].includes(h(n.value))&&(n.value=_(n.value)),n}function _(e){const t={};for(const n of Object.keys(Object.getOwnPropertyDescriptors(e)))t[n]=C(e,n);return t}function T(e,t,n){const r=h(n.value);if(["array","object"].includes(r)){const e=k(Object.defineProperties(E(r),n.value))?[]:{};n.value=B(e,n.value)}return Object.defineProperty(e,t,n),e}function B(e,t){for(const[n,r]of Object.entries(t))T(e,n,r);return e}var L=Object.freeze({__proto__:null,accessors:e,expandEvents:t,expandTree:function e(t,n){const r=h(n),s=h(t);if(!["string","function"].includes(r)||!["array","object"].includes(s))return t;let i=E(t);for(const[s,o]of Object.entries(t))"string"===r?i[s]=D(n,o):"function"===r&&(i[s]=n(o)),i[s][n]&&"object"==typeof i[s][n]&&(i[s][n]=e(i[s][n],n));return i},impandTree:function e(t,n){const r=h(n),s=h(t);if(!["string","function"].includes(r)||!["array","object"].includes(s))return t;let i=E(t);for(const[s,o]of Object.entries(t))"string"===r?i[s]=O(n,o):"function"===r&&(i[s]=n(o)),i[s]&&"object"==typeof i[s]&&(i[s]=e(i[s],n));return i},isArrayLike:k,propertyDirectory:P,recursiveAssign:x,recursiveAssignConcat:function e(t,...n){if(!t)return t;for(const r of n)if(r)for(const[n,s]of Object.entries(r)){const r=h(t[n]),i=h(s);t[n]="object"===r&&"object"===i?e(t[n],s):"array"===r&&"array"===i?t[n].concat(s):s}return t},recursiveDefineProperties:B,recursiveDefineProperty:T,recursiveFreeze:function e(t){for(const[n,r]of Object.entries(t))r&&"object"==typeof r&&e(r);return Object.freeze(t)},recursiveGetOwnPropertyDescriptor:C,recursiveGetOwnPropertyDescriptors:_,regularExpressions:g,typeOf:h,typedObjectLiteral:E,variables:f});function A(e){if(e.length<3)return"{"+e+"}";for(var t=-1,n=2;n<e.length;n++)if("."===e[n]&&"."===e[n-1]&&(n<2||"\\"!==e[n-2])){if(t>-1)return"{"+e+"}";t=n-1}if(t>-1){var r=e.substr(0,t),s=e.substr(t+2);if(r.length>0&&s.length>0)return"["+e.substr(0,t)+"-"+e.substr(t+2)+"]"}return"{"+e+"}"}function M(e){if("string"!=typeof e)throw new TypeError("A pattern must be a string, but "+typeof e+" given");for(var t,n=!1,r=0,s=0,i=-1,o=[""],a=[],c=0;c<e.length;c++){var u=e[c];if("\\"!==u){if("{"===u)if(n)r++;else if(c>i&&!r){t=e.substring(i+1,c);for(var l=0;l<o.length;l++)o[l]+=t;a=[],i=c,n=!0,r++}else r--;else if("}"===u)if(n)s++;else if(1===s){if(t=e.substring(i+1,c),a.length>0){var p=[];a.push(M(t));for(l=0;l<o.length;l++)for(var f=0;f<a.length;f++)for(var g=0;g<a[f].length;g++)p.push(o[l]+a[f][g]);o=p}else{t=A(t);for(l=0;l<o.length;l++)o[l]+=t}i=c,s--}else s--;else n||","!==u||s-r!=1||(t=e.substring(i+1,c),a.push(M(t)),i=c);!n||s!==r&&c!==e.length-1||(n=!1,c=i-1)}else c++}if(-1===i)return[e];var h="{"===e[i]?i:i+1;if(h<e.length){t=e.substr(h);for(l=0;l<o.length;l++)o[l]+=t}return o}function U(e,t){var n,r=!1!==t["!"],s=!1!==t["()"],i=!1;if(r){for(n=0;n<e.length&&"!"===e[n];n++){if(s&&"("===e[n+1]){n--;break}i=!i}n>0&&(e=e.substr(n))}return{pattern:e,isNegated:i}}function F(e){return"-"===e||"^"===e||"$"===e||"+"===e||"."===e||"("===e||")"===e||"|"===e||"["===e||"]"===e||"{"===e||"}"===e||"*"===e||"?"===e||"\\"===e?"\\"+e:e}function N(e,t,n){var r=void 0===t.separator||t.separator,s="",i="",o=".";!0===r?(s="/",i="[/\\\\]",o="[^/\\\\]"):o=r?(i=function(e){for(var t="",n=0;n<e.length;n++)t+=F(e[n]);return t}(s=r)).length>1?"((?!"+(i="(?:"+i+")")+").)":"[^"+i+"]":".";var a=r?i+"+?":"",c=r?i+"*?":"",u=r?e.split(s):[e];return{source:e,segments:u,options:t,separator:r,separatorSplitter:s,separatorMatcher:i,optionalSeparator:c,requiredSeparator:a,wildcard:o,support:{qMark:!1!==t["?"],star:!1!==t["*"],globstar:r&&!1!==t["**"],brackets:!1!==t["[]"],extglobs:!1!==t["()"],excludeDot:n&&!1!==t.excludeDot}}}function H(e,t,n,r){return{source:e,isFirst:n,isLast:r,end:e.length-1}}var K="(?!\\.)";function S(e,t,n){return e.addToUnmatch&&(e.result.unmatch+=t),e.addToMatch&&(n&&!e.dotHandled&&(t=K+t),e.dotHandled=!0,e.result.match+=t),e.result}function q(e,t,n){var r=e.support,s=function(e,t,n){return{pattern:e,segment:t,result:n,openingBracket:t.end+1,closingBracket:-1,openingParens:0,closingParens:0,parensHandledUntil:-1,extglobModifiers:[],scanningForParens:!1,escapeChar:!1,addToMatch:!0,addToUnmatch:e.support.extglobs,dotHandled:!1,i:-1,char:"",nextChar:""}}(e,t,n),i=t.isLast?e.optionalSeparator:e.requiredSeparator;if(r.excludeDot||(s.dotHandled=!0),-1===t.end)return t.isLast&&!t.isFirst?n:S(s,i);if(r.globstar&&"**"===t.source)return S(s,"(?:"+((s.dotHandled?"":K)+e.wildcard+"*?"+i)+")*?");for(;++s.i<=t.end;){if(s.char=s.segment.source[s.i],s.nextChar=s.i<t.end?t.source[s.i+1]:"","\\"===s.char){if(s.i<s.segment.end){s.escapeChar=!0;continue}s.char=""}e=s.pattern,t=s.segment;var o=s.char,a=s.i;if(e.support.brackets&&!s.scanningForParens){if(a>s.openingBracket&&a<=s.closingBracket){s.escapeChar?S(s,F(o)):a===s.closingBracket?(S(s,"]"),s.openingBracket=t.source.length):"-"===o&&a===s.closingBracket-1?S(s,"\\-"):"!"===o&&a===s.openingBracket+1?S(s,"^"):S(s,"]"===o?"\\]":o),s.escapeChar=!1;continue}if(a>s.openingBracket){"]"===o&&!s.escapeChar&&a>s.openingBracket+1&&a>s.closingBracket?(s.closingBracket=a,s.i=s.openingBracket,e.separator?S(s,"(?!"+e.separatorMatcher+")[",!0):S(s,"[",!0)):a===t.end&&(S(s,"\\["),s.i=s.openingBracket,s.openingBracket=t.source.length,s.closingBracket=t.source.length),s.escapeChar=!1;continue}if("["===o&&!s.escapeChar&&a>s.closingBracket&&a<t.end){s.openingBracket=a,s.escapeChar=!1;continue}}if(s.pattern.support.extglobs){var c=s.extglobModifiers,u=(o=s.char,s.nextChar);a=s.i;if("("!==u||s.escapeChar||"@"!==o&&"?"!==o&&"*"!==o&&"+"!==o&&"!"!==o){if(")"!==o||s.escapeChar){if("|"===o&&s.closingParens&&!s.scanningForParens&&!s.escapeChar){S(s,"|");continue}}else if(s.scanningForParens)s.closingParens++;else if(c.length){var l=c.pop();if("!"===l&&-1!==c.indexOf("!"))throw new Error("Nested negated extglobs aren't supported");S(s,")"+(l="!"===l||"@"===l?"":l)),s.addToMatch=!0,s.addToUnmatch=!0,s.closingParens--;continue}}else if(s.scanningForParens)s.openingParens++;else if(a>s.parensHandledUntil&&!s.closingParens)s.parensHandledUntil=a,s.scanningForParens=!0,s.openingParens++;else{if(s.closingParens>=s.openingParens){"!"===o&&(s.addToMatch=!0,s.addToUnmatch=!1,S(s,s.pattern.wildcard+"*?",!0),s.addToMatch=!1,s.addToUnmatch=!0,s.result.useUnmatch=!0),c.push(o),S(s,"(?:",!0),s.openingParens--,s.i++;continue}s.openingParens--}if(s.scanningForParens){s.closingParens!==s.openingParens&&a!==s.segment.end||(s.scanningForParens=!1,s.i=s.parensHandledUntil-1),s.escapeChar=!1;continue}}r=(e=s.pattern).support;!s.escapeChar&&r.star&&"*"===s.char?s.i!==s.segment.end&&"*"===s.nextChar||S(s,e.wildcard+"*?",!0):!s.escapeChar&&r.qMark&&"?"===s.char?S(s,e.wildcard,!0):S(s,F(s.char)),s.escapeChar=!1}return S(s,i)}function R(e,t,n){for(var r=N(e,t,n),s={match:"",unmatch:"",useUnmatch:!1},i=r.segments,o=0;o<i.length;o++){q(r,H(i[o],0,0===o,o===i.length-1),s)}return s.useUnmatch?"(?!^"+s.unmatch+"$)"+s.match:s.match}function $(e,t){if("string"!=typeof t)throw new TypeError("Sample must be a string, but "+typeof t+" given");return e.test(t)}function z(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("The first argument must be a single pattern string or an array of patterns, but "+typeof e+" given");if("string"!=typeof t&&"boolean"!=typeof t||(t={separator:t}),2===arguments.length&&void 0!==t&&("object"!=typeof t||null===t||Array.isArray(t)))throw new TypeError("The second argument must be an options object or a string/boolean separator, but "+typeof t+" given");if("\\"===(t=t||{}).separator)throw new Error("\\ is not a valid separator");var n=function(e,t){e=Array.isArray(e)?e:[e],!1!==t["{}"]&&(e=function(e,t){for(var n=[],r=0;r<e.length;r++)for(var s=t(e[r]),i=0;i<s.length;i++)n.push(s[i]);return n}(e,M));for(var n=[],r=[],s="",i=0;i<e.length;i++){var o=U(e[i],t),a=R(o.pattern,t,!o.isNegated);o.isNegated?r.push(a):n.push(a)}return r.length&&(s="(?!(?:"+r.join("|")+")$)"),n.length>1?s+="(?:"+n.join("|")+")":1===n.length?s+=n[0]:s.length&&(s+=R("**",t,!0)),"^"+s+"$"}(e,t),r=new RegExp(n,t.flags),s=$.bind(null,r);return s.options=t,s.pattern=e,s.regexp=r,s}class V{#e;#t=!1;#n=[];#r=[];#s;#i;#o;constructor(e,t){if(!e||!t)return this;const n=((e={})=>{const t={enable:!1,assign:"addEventListener",deassign:"removeEventListener",transsign:"dispatchEvent",bindListener:!0,errorLog:!1,methods:{assign:{addEventListener:function(e,t){const{type:n,listener:r,settings:s}=e,{options:i,useCapture:o}=s;return t.addEventListener(n,r,i||o)},on:function(e,t){const{type:n,listener:r}=e;return t.on(n,r)},once:function(e,t){const{type:n,listener:r}=e;return t.once(n,r)}},deassign:{removeEventListener:function(e,t){const{type:n,listener:r,settings:s}=e,{options:i,useCapture:o}=s;return t.removeEventListener(n,r,i||o)},off:function(e,t){const{type:n,listener:r}=e;return t.off(n,r)}},transsign:{dispatchEvent:function(e,t,n){return t.dispatchEvent(n)},emit:function(e,t,n,...r){return t.emit(n,...r)}}}};for(const[n,r]of Object.entries(e))switch(n){case"methods":t[n]=x(t[n],r);break;case"enableEvents":break;default:t[n]=r}return t})(e);Object.defineProperties(this,{settings:{value:n},path:{value:n.path},type:{value:n.type},assigned:{value:[]},deassigned:{value:[]},transsigned:{value:[]},listener:{configurable:!0,get(){let e;if("string"===h(n.listener)){let r=t;e:for(const e of n.listener.split(".")){if(void 0===r[e])break e;r=r[e]}"function"===h(r)&&(e=r)}else e=n.listener;return!0===n.bindListener&&(e=e.bind(this.#e)),Object.defineProperty(this,"listener",{value:e}),e}}}),this.#e=t,this.enable=this.settings.enable}get enable(){return this.#t}set enable(e){const t=this.#a,n=this.assigned,r=this.deassigned;n.length=0,r.length=0;for(const s of t){const{path:t,target:i,enable:o}=s;this.settings;if(o!==e)if(!0===e)try{this.#c(i),s.enable=e,n.push(s)}catch(e){this.settings.errorLog&&console.error(e)}else if(!1===e)try{this.#u(i),s.enable=e,r.push(s)}catch(e){this.settings.errorLog&&console.error(e)}}this.#t=e}get#l(){return this.settings.target}get#a(){const e=this.#r,t=[];if(this.#l)for(const n of[].concat(this.#l)){const r=e.find((e=>e?.path===this.path));void 0!==r?t.push(r):void 0===r&&ptargets.push({path:this.path,target:n,enable:!1})}else if("string"===h(this.path)){const n=[];if(this.path===this.#p){const e={path:this.path,target:this.#e,enable:!1};t.push(e)}else{if(this.settings.propertyDirectory){const e=this.#f,t=z(this.path,{separator:"."});for(const[r,s]of e){!0===t(r)&&n.push([r,s])}"*"===this.path.charAt(0)&&n.unshift(this.#p)}else n.push(this.path);for(const[r,s]of n){const n=e.find((e=>e.path===r));let i,o=s;void 0!==o&&(o===n?.target?i=n:"object"==typeof o&&(i={path:r,target:o,enable:!1})),void 0!==i&&t.push(i)}}}return this.#r=t,this.#r}get#p(){return this.settings.propertyDirectory.scopeKey}get#c(){return void 0!==this.#s||(this.#s=this.settings.methods.assign[this.settings.assign].bind(null,this)),this.#s}get#u(){return void 0!==this.#i||(this.#i=this.settings.methods.deassign[this.settings.deassign].bind(null,this)),this.#i}get#g(){return void 0!==this.#o||(this.#o=this.settings.methods.transsign[this.settings.transsign].bind(null,this)),this.#o}get#f(){if(!this.settings.propertyDirectory)return null;const e=Object.assign(this.settings.propertyDirectory,{values:!0});return P(this.#e,e)}emit(){const e=this.#a,t=this.transsigned,n=this.#n;t.length=0,n.length=0;for(const r of e){const{target:e}=r;try{this.#g(e,...arguments),t.push(r)}catch(e){n.push(r)}}return this}}class G extends EventTarget{static implement=function(n,r){if(!n||!r)return;const s=((t={})=>{const n={events:{},enableEvents:!1,propertyDirectory:{accessors:[e.default],scopeKey:":scope",maxDepth:10},propertyDefinitions:{getEvents:"getEvents",addEvents:"addEvents",removeEvents:"removeEvents",enableEvents:"enableEvents",disableEvents:"disableEvents",reenableEvents:"reenableEvents",emitEvents:"emitEvents"}};for(const[e,r]of Object.entries(t))switch(e){case"propertyDefinitions":case"propertyDirectory":n[e]=Object.assign(n[e],r);break;default:n[e]=r}return n})(r),i=[];return Object.defineProperties(n,{[s.propertyDefinitions.getEvents]:{enumerable:!1,writable:!1,value:function(){if(!arguments[0])return i;const e=[],t=[].concat(arguments[0]);for(const n of t)for(const t of i){let r;e:for(const[e,s]of Object.entries(n)){let n;if(n="listener"===e?t.settings[e]===s:t[e]===s,!1===r)break e;r=n}!0===r&&e.push(t)}return e}},[s.propertyDefinitions.addEvents]:{enumerable:!1,writable:!1,value:function(){if(!arguments.length)return n;let e=t(arguments[0],s.propertyDirectory.scopeKey),r=arguments[1]||!1;for(let t of e){const e={};for(const t of["assign","deassign","transsign","propertyDirectory","bindListener"]){const n=s[t];void 0!==n&&(e[t]=n)}x(e,t);const o=new V(e,n);r&&(o.enable=!0),i.push(o)}return n}},[s.propertyDefinitions.removeEvents]:{enumerable:!1,writable:!1,value:function(){const e=n[s.propertyDefinitions.getEvents](arguments[0]);if(0===e.length)return n;let t=i.length-1;for(;t>-1;){const n=i[t];e.includes(n)&&(n.enable=!1,i.splice(t,1)),t--}return n}},[s.propertyDefinitions.enableEvents]:{enumerable:!1,writable:!1,value:function(){const e=n[s.propertyDefinitions.getEvents](arguments[0]);if(0===e.length)return n;for(const t of e)t.enable=!0;return n}},[s.propertyDefinitions.disableEvents]:{enumerable:!1,writable:!1,value:function(){const e=n[s.propertyDefinitions.getEvents](arguments[0]);if(0===e.length)return n;for(const t of e)t.enable=!1;return n}},[s.propertyDefinitions.reenableEvents]:{enumerable:!1,writable:!1,value:function(){const e=n[s.propertyDefinitions.getEvents](arguments[0]);for(const t of e)t.enable=!1,t.enable=!0;return n}},[s.propertyDefinitions.emitEvents]:{enumerable:!1,writable:!1,value:function(e,...t){const r=n[s.propertyDefinitions.getEvents](e);for(const e of r)e.emit(...t);return n}}}),s.events&&n[s.propertyDefinitions.addEvents](s.events),!0===s.enableEvents&&n[s.propertyDefinitions.enableEvents](),n};constructor(e={}){return super(),G.implement(this,e)}}export{G as Core,L as Coutil};
//# sourceMappingURL=core-plex.min.js.map
