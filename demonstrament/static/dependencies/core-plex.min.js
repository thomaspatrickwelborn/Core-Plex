function e(e){const t=[];if(Array.isArray(e))return e;if(void 0===e)return t;for(const[n,r]of Object.entries(e)){const e=n.split(" ");let s,a,i;1===e.length?(s=":scope",a=e[0]):e.length>1&&(s=e[0],a=e[1]),Array.isArray(r)?(i=r[0],r[1]):i=r;const o={type:a,path:s,listener:i,enable:!1};t.push(o)}return t}const t={depth:0,maxDepth:10};function n(e,r){const s=[],a=Object.assign({},t,r);if(a.depth++,a.depth>a.maxDepth)return s;for(const[t,r]of Object.entries(e))if(s.push(t),"object"==typeof r&&null!==r&&r!==e){const e=n(r,a);for(const n of e){let e;e="object"==typeof n?[t,...n].join("."):[t,n].join("."),s.push(e)}}return s}function r(){const e=[...arguments],t=e.shift(),n=e;for(const e of n)if(null!=e)for(let[n,s]of Object.entries(e))null!==t[n]&&"object"==typeof s?void 0===t[n]?t[n]=s:t[n]=r(t[n],s):t[n]=s;return t}var s=Object.freeze({__proto__:null,expandEvents:e,propertyDirectory:n,recursiveAssign:r,recursiveAssignConcat:function e(){const t=[...arguments],n=t.shift(),r=t;for(const t of r)if(null!=t)for(let[r,s]of Object.entries(t))null!==n[r]&&"object"==typeof s?void 0===n[r]?n[r]=s:Array.isArray(s)?n[r]=n[r].concat(e(s)):n[r]=e(n[r],s):n[r]=s;return n},typeOf:e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase()});function a(e){if(e.length<3)return"{"+e+"}";for(var t=-1,n=2;n<e.length;n++)if("."===e[n]&&"."===e[n-1]&&(n<2||"\\"!==e[n-2])){if(t>-1)return"{"+e+"}";t=n-1}if(t>-1){var r=e.substr(0,t),s=e.substr(t+2);if(r.length>0&&s.length>0)return"["+e.substr(0,t)+"-"+e.substr(t+2)+"]"}return"{"+e+"}"}function i(e){if("string"!=typeof e)throw new TypeError("A pattern must be a string, but "+typeof e+" given");for(var t,n=!1,r=0,s=0,o=-1,c=[""],l=[],h=0;h<e.length;h++){var g=e[h];if("\\"!==g){if("{"===g)if(n)r++;else if(h>o&&!r){t=e.substring(o+1,h);for(var p=0;p<c.length;p++)c[p]+=t;l=[],o=h,n=!0,r++}else r--;else if("}"===g)if(n)s++;else if(1===s){if(t=e.substring(o+1,h),l.length>0){var u=[];l.push(i(t));for(p=0;p<c.length;p++)for(var f=0;f<l.length;f++)for(var d=0;d<l[f].length;d++)u.push(c[p]+l[f][d]);c=u}else{t=a(t);for(p=0;p<c.length;p++)c[p]+=t}o=h,s--}else s--;else n||","!==g||s-r!=1||(t=e.substring(o+1,h),l.push(i(t)),o=h);!n||s!==r&&h!==e.length-1||(n=!1,h=o-1)}else h++}if(-1===o)return[e];var v="{"===e[o]?o:o+1;if(v<e.length){t=e.substr(v);for(p=0;p<c.length;p++)c[p]+=t}return c}function o(e,t){var n,r=!1!==t["!"],s=!1!==t["()"],a=!1;if(r){for(n=0;n<e.length&&"!"===e[n];n++){if(s&&"("===e[n+1]){n--;break}a=!a}n>0&&(e=e.substr(n))}return{pattern:e,isNegated:a}}function c(e){return"-"===e||"^"===e||"$"===e||"+"===e||"."===e||"("===e||")"===e||"|"===e||"["===e||"]"===e||"{"===e||"}"===e||"*"===e||"?"===e||"\\"===e?"\\"+e:e}function l(e,t,n){var r=void 0===t.separator||t.separator,s="",a="",i=".";!0===r?(s="/",a="[/\\\\]",i="[^/\\\\]"):i=r?(a=function(e){for(var t="",n=0;n<e.length;n++)t+=c(e[n]);return t}(s=r)).length>1?"((?!"+(a="(?:"+a+")")+").)":"[^"+a+"]":".";var o=r?a+"+?":"",l=r?a+"*?":"",h=r?e.split(s):[e];return{source:e,segments:h,options:t,separator:r,separatorSplitter:s,separatorMatcher:a,optionalSeparator:l,requiredSeparator:o,wildcard:i,support:{qMark:!1!==t["?"],star:!1!==t["*"],globstar:r&&!1!==t["**"],brackets:!1!==t["[]"],extglobs:!1!==t["()"],excludeDot:n&&!1!==t.excludeDot}}}function h(e,t,n,r){return{source:e,isFirst:n,isLast:r,end:e.length-1}}var g="(?!\\.)";function p(e,t,n){return e.addToUnmatch&&(e.result.unmatch+=t),e.addToMatch&&(n&&!e.dotHandled&&(t=g+t),e.dotHandled=!0,e.result.match+=t),e.result}function u(e,t,n){var r=e.support,s=function(e,t,n){return{pattern:e,segment:t,result:n,openingBracket:t.end+1,closingBracket:-1,openingParens:0,closingParens:0,parensHandledUntil:-1,extglobModifiers:[],scanningForParens:!1,escapeChar:!1,addToMatch:!0,addToUnmatch:e.support.extglobs,dotHandled:!1,i:-1,char:"",nextChar:""}}(e,t,n),a=t.isLast?e.optionalSeparator:e.requiredSeparator;if(r.excludeDot||(s.dotHandled=!0),-1===t.end)return t.isLast&&!t.isFirst?n:p(s,a);if(r.globstar&&"**"===t.source)return p(s,"(?:"+((s.dotHandled?"":g)+e.wildcard+"*?"+a)+")*?");for(;++s.i<=t.end;){if(s.char=s.segment.source[s.i],s.nextChar=s.i<t.end?t.source[s.i+1]:"","\\"===s.char){if(s.i<s.segment.end){s.escapeChar=!0;continue}s.char=""}e=s.pattern,t=s.segment;var i=s.char,o=s.i;if(e.support.brackets&&!s.scanningForParens){if(o>s.openingBracket&&o<=s.closingBracket){s.escapeChar?p(s,c(i)):o===s.closingBracket?(p(s,"]"),s.openingBracket=t.source.length):"-"===i&&o===s.closingBracket-1?p(s,"\\-"):"!"===i&&o===s.openingBracket+1?p(s,"^"):p(s,"]"===i?"\\]":i),s.escapeChar=!1;continue}if(o>s.openingBracket){"]"===i&&!s.escapeChar&&o>s.openingBracket+1&&o>s.closingBracket?(s.closingBracket=o,s.i=s.openingBracket,e.separator?p(s,"(?!"+e.separatorMatcher+")[",!0):p(s,"[",!0)):o===t.end&&(p(s,"\\["),s.i=s.openingBracket,s.openingBracket=t.source.length,s.closingBracket=t.source.length),s.escapeChar=!1;continue}if("["===i&&!s.escapeChar&&o>s.closingBracket&&o<t.end){s.openingBracket=o,s.escapeChar=!1;continue}}if(s.pattern.support.extglobs){var l=s.extglobModifiers,h=(i=s.char,s.nextChar);o=s.i;if("("!==h||s.escapeChar||"@"!==i&&"?"!==i&&"*"!==i&&"+"!==i&&"!"!==i){if(")"!==i||s.escapeChar){if("|"===i&&s.closingParens&&!s.scanningForParens&&!s.escapeChar){p(s,"|");continue}}else if(s.scanningForParens)s.closingParens++;else if(l.length){var u=l.pop();if("!"===u&&-1!==l.indexOf("!"))throw new Error("Nested negated extglobs aren't supported");p(s,")"+(u="!"===u||"@"===u?"":u)),s.addToMatch=!0,s.addToUnmatch=!0,s.closingParens--;continue}}else if(s.scanningForParens)s.openingParens++;else if(o>s.parensHandledUntil&&!s.closingParens)s.parensHandledUntil=o,s.scanningForParens=!0,s.openingParens++;else{if(s.closingParens>=s.openingParens){"!"===i&&(s.addToMatch=!0,s.addToUnmatch=!1,p(s,s.pattern.wildcard+"*?",!0),s.addToMatch=!1,s.addToUnmatch=!0,s.result.useUnmatch=!0),l.push(i),p(s,"(?:",!0),s.openingParens--,s.i++;continue}s.openingParens--}if(s.scanningForParens){s.closingParens!==s.openingParens&&o!==s.segment.end||(s.scanningForParens=!1,s.i=s.parensHandledUntil-1),s.escapeChar=!1;continue}}r=(e=s.pattern).support;!s.escapeChar&&r.star&&"*"===s.char?s.i!==s.segment.end&&"*"===s.nextChar||p(s,e.wildcard+"*?",!0):!s.escapeChar&&r.qMark&&"?"===s.char?p(s,e.wildcard,!0):p(s,c(s.char)),s.escapeChar=!1}return p(s,a)}function f(e,t,n){for(var r=l(e,t,n),s={match:"",unmatch:"",useUnmatch:!1},a=r.segments,i=0;i<a.length;i++){u(r,h(a[i],0,0===i,i===a.length-1),s)}return s.useUnmatch?"(?!^"+s.unmatch+"$)"+s.match:s.match}function d(e,t){if("string"!=typeof t)throw new TypeError("Sample must be a string, but "+typeof t+" given");return e.test(t)}function v(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("The first argument must be a single pattern string or an array of patterns, but "+typeof e+" given");if("string"!=typeof t&&"boolean"!=typeof t||(t={separator:t}),2===arguments.length&&void 0!==t&&("object"!=typeof t||null===t||Array.isArray(t)))throw new TypeError("The second argument must be an options object or a string/boolean separator, but "+typeof t+" given");if("\\"===(t=t||{}).separator)throw new Error("\\ is not a valid separator");var n=function(e,t){e=Array.isArray(e)?e:[e],!1!==t["{}"]&&(e=function(e,t){for(var n=[],r=0;r<e.length;r++)for(var s=t(e[r]),a=0;a<s.length;a++)n.push(s[a]);return n}(e,i));for(var n=[],r=[],s="",a=0;a<e.length;a++){var c=o(e[a],t),l=f(c.pattern,t,!c.isNegated);c.isNegated?r.push(l):n.push(l)}return r.length&&(s="(?!(?:"+r.join("|")+")$)"),n.length>1?s+="(?:"+n.join("|")+")":1===n.length?s+=n[0]:s.length&&(s+=f("**",t,!0)),"^"+s+"$"}(e,t),r=new RegExp(n,t.flags),s=d.bind(null,r);return s.options=t,s.pattern=e,s.regexp=r,s}var b={propertyDirectory:{maxDepth:10}};class y{#e;#t=!1;#n;#r=[];constructor(e){this.#e=Object.assign({},b,e),this.enable=this.#e.enable}get propertyDirectory(){return n(this.#s,this.#e.propertyDirectory)}get type(){return this.#e.type}get path(){return this.#e.path}get#a(){const e=this.#r;let t=[this.path].concat(this.propertyDirectory);const n=[],r=[],s=v(this.path,{separator:"."});for(const e of t){!0===s(e)&&n.push(e)}for(const t of n){const n=e.find((e=>e?.path===t));let s,a=this.#s;const i=t.split(".");let o=0;e:for(;o<i.length;){let e=i[o];if(0===o&&":scope"===e)break e;t:for(const t of this.#e.target.accessors){if(void 0===a)break t;if("[]"===t?a=a[e]:"get"===t&&(a=a?.get(e)),void 0!==a)break t}o++}void 0!==a&&(s=a===n?.target?n:{path:t,target:a,enable:!1}),void 0!==s&&r.push(s)}return this.#r=r,this.#r}get listener(){return this.#e.listener}get options(){return this.#e.options}get enable(){return this.#t}set enable(e){const t=this.#a;if(0===this.#a.length)return;const n=!0===e?this.#e.target.assign:this.#e.target.deassign;for(const e of t){const{path:t,target:r,enable:s}=e;if(s!==n)try{r[n](this.type,this.#i,this.options),e.enable=n}catch(e){console.error(e)}}this.#t=e}get#s(){return this.#e.context}get#i(){return void 0!==this.#n||(this.#n=this.#e.listener.bind(this.#s)),this.#n}}class m extends EventTarget{#o=[];#e;static implement=function(e,t){let n=[];Object.defineProperties(e,{events:{enumerable:!1,configurable:!1,get:()=>n},getEvents:{value:configurable.getEvents.bind(e)},addEvents:{value:m.addEvents.bind(e)},removeEvents:{value:m.removeEvents.bind(e)},enableEvents:{value:m.enableEvents.bind(e)}})};constructor(e={}){super(),this.addEvents(e.events),e.enableEvents&&this.enableEvents(e.enableEvents)}get events(){return this.#o}getEvents(){const e=[],t=this.events,n=[].concat(arguments[0]);for(const r of n){const{type:n,path:s,listener:a,enable:i}=r,o=[];void 0!==n&&o.push(["type",n]),void 0!==s&&o.push(["path",s]),void 0!==a&&o.push(["listener",a]),void 0!==i&&o.push(["enable",i]),e.push(...t.filter((e=>o.reduce(((t,[n,r])=>{const s=e[n]===r;return!1!==t&&(t=s),t}),void 0))))}return e}addEvents(){if(void 0===arguments[0])return this;const t=e(arguments[0]),n=this.events;for(let e of t){e=r({target:{assign:"addEventListener",deassign:"removeEventListener",accessors:["[]","get"]},context:this},e);const t=new y(e);n.push(t)}return this}removeEvents(){let e;if(0===arguments.length?e=this.getEvents():1===arguments.length&&(e=this.getEvents(arguments[0])),0===e.length)return this;let t=e.length-1;for(;t>-1;){const n=e[t];-1!==this.events.findIndex((e=>e===n))&&(n.enable=!1,this.events.splice(t,1)),t--}return this}enableEvents(){let e;e=0===arguments.length||!0===arguments[0]?this.events:this.getEvents(arguments[0]);for(const t of e)t.enable=!0}disableEvents(){let e;e=0===arguments.length?this.events:this.getEvents(arguments[0]);for(const t of e)t.enable=!1;return this}reenableEvents(){return this.disableEvents(...arguments).enableEvents(...arguments)}}export{m as Core,s as Coutil};
//# sourceMappingURL=core-plex.min.js.map
