var e={default:(e,t)=>void 0===t?e:e[t]};function t(e){if(Array.isArray(e)||void 0===e)return e;const t=[];for(const[n,r]of Object.entries(e)){const e=n.split(" ");let s,i,o,a;1===e.length?(s=":scope",i=e[0]):e.length>1&&(s=e[0],i=e[1]),Array.isArray(r)?(o=r[0],a=r[1]):o=r;const c={type:i,path:s,listener:o,enable:!1};t.push(c)}return t}const n={depth:0,maxDepth:10,accessors:[e.default]};function r(e,t){const s=[],i=Object.assign({},n,t);if(i.depth++,i.depth>i.maxDepth)return s;for(const t of i.accessors){const n=t(e);if(n)for(const[e,t]of Object.entries(n))if(s.push(e),"object"==typeof t&&null!==t&&t!==n){const n=r(t,i);for(const t of n){let n;n="object"==typeof t?[e,...t].join("."):[e,t].join("."),s.push(n)}}}return s}const s=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function i(e,...t){if(!e)return e;for(const n of t)if(n)for(const[t,r]of Object.entries(n)){const n=s(e[t]),o=s(r);e[t]="object"===n&&"object"===o?i(e[t],r):r}return e}const o={string:String,number:Number,boolean:Boolean,bigint:BigInt,undefined:void 0,null:null},a=Object.keys(o),c=Object.values(o),l={object:Object,array:Array},p=Object.keys(l),u=Object.values(l),g=Object.assign({},o,l),h=Object.keys(g),f=Object.values(g),d=[o.String,o.Number,o.Boolean,l.Object,l.Array];var b=Object.freeze({__proto__:null,ObjectKeys:p,ObjectValues:u,Objects:l,PrimitiveKeys:a,PrimitiveValues:c,Primitives:o,TypeKeys:h,TypeMethods:d,TypeValues:f,Types:g}),v=Object.freeze({__proto__:null,accessors:e,expandEvents:t,impandEvents:function(e){if(!Array.isArray(e))return e;const t={};for(const n of e){const{path:e,type:r,listener:s,options:i}=n,o=`${$path} ${$type}`;t[o]=void 0!==i?[s,i]:s}return t},isPropertyDefinition:function(e){return!!(Object.getOwnPropertyDescriptor(e,"type")&&(f.includes(e.type)||h.includes(e.type))||"object"==typeof e.type&&Object.getOwnPropertyDescriptor(e.type,"value")&&(f.includes(e.type.value)||h.includes(e.type.value)))},propertyDirectory:r,recursiveAssign:i,recursiveAssignConcat:function e(t,...n){if(!t)return t;for(const r of n)if(r)for(const[n,i]of Object.entries(r)){const r=s(t[n]),o=s(i);t[n]="object"===r&&"object"===o?e(t[n],i):"array"===r&&"array"===o?t[n].concat(i):i}return t},recursiveFreeze:function e(t){for(const[n,r]of Object.entries(t))r&&"object"==typeof r&&e(r);return Object.freeze(t)},regularExpressions:{quotationEscape:/\.(?=(?:[^"]*"[^"]*")*[^"]*$)/},typeOf:s,typedObjectLiteral:function(e){return"object"===s(e)?{}:"array"===s(e)?[]:"string"===s(e)?"object"===e?{}:"array"===e?[]:void 0:void 0},variables:b});function y(e){if(e.length<3)return"{"+e+"}";for(var t=-1,n=2;n<e.length;n++)if("."===e[n]&&"."===e[n-1]&&(n<2||"\\"!==e[n-2])){if(t>-1)return"{"+e+"}";t=n-1}if(t>-1){var r=e.substr(0,t),s=e.substr(t+2);if(r.length>0&&s.length>0)return"["+e.substr(0,t)+"-"+e.substr(t+2)+"]"}return"{"+e+"}"}function m(e){if("string"!=typeof e)throw new TypeError("A pattern must be a string, but "+typeof e+" given");for(var t,n=!1,r=0,s=0,i=-1,o=[""],a=[],c=0;c<e.length;c++){var l=e[c];if("\\"!==l){if("{"===l)if(n)r++;else if(c>i&&!r){t=e.substring(i+1,c);for(var p=0;p<o.length;p++)o[p]+=t;a=[],i=c,n=!0,r++}else r--;else if("}"===l)if(n)s++;else if(1===s){if(t=e.substring(i+1,c),a.length>0){var u=[];a.push(m(t));for(p=0;p<o.length;p++)for(var g=0;g<a.length;g++)for(var h=0;h<a[g].length;h++)u.push(o[p]+a[g][h]);o=u}else{t=y(t);for(p=0;p<o.length;p++)o[p]+=t}i=c,s--}else s--;else n||","!==l||s-r!=1||(t=e.substring(i+1,c),a.push(m(t)),i=c);!n||s!==r&&c!==e.length-1||(n=!1,c=i-1)}else c++}if(-1===i)return[e];var f="{"===e[i]?i:i+1;if(f<e.length){t=e.substr(f);for(p=0;p<o.length;p++)o[p]+=t}return o}function j(e,t){var n,r=!1!==t["!"],s=!1!==t["()"],i=!1;if(r){for(n=0;n<e.length&&"!"===e[n];n++){if(s&&"("===e[n+1]){n--;break}i=!i}n>0&&(e=e.substr(n))}return{pattern:e,isNegated:i}}function E(e){return"-"===e||"^"===e||"$"===e||"+"===e||"."===e||"("===e||")"===e||"|"===e||"["===e||"]"===e||"{"===e||"}"===e||"*"===e||"?"===e||"\\"===e?"\\"+e:e}function O(e,t,n){var r=void 0===t.separator||t.separator,s="",i="",o=".";!0===r?(s="/",i="[/\\\\]",o="[^/\\\\]"):o=r?(i=function(e){for(var t="",n=0;n<e.length;n++)t+=E(e[n]);return t}(s=r)).length>1?"((?!"+(i="(?:"+i+")")+").)":"[^"+i+"]":".";var a=r?i+"+?":"",c=r?i+"*?":"",l=r?e.split(s):[e];return{source:e,segments:l,options:t,separator:r,separatorSplitter:s,separatorMatcher:i,optionalSeparator:c,requiredSeparator:a,wildcard:o,support:{qMark:!1!==t["?"],star:!1!==t["*"],globstar:r&&!1!==t["**"],brackets:!1!==t["[]"],extglobs:!1!==t["()"],excludeDot:n&&!1!==t.excludeDot}}}function k(e,t,n,r){return{source:e,isFirst:n,isLast:r,end:e.length-1}}var D="(?!\\.)";function x(e,t,n){return e.addToUnmatch&&(e.result.unmatch+=t),e.addToMatch&&(n&&!e.dotHandled&&(t=D+t),e.dotHandled=!0,e.result.match+=t),e.result}function w(e,t,n){var r=e.support,s=function(e,t,n){return{pattern:e,segment:t,result:n,openingBracket:t.end+1,closingBracket:-1,openingParens:0,closingParens:0,parensHandledUntil:-1,extglobModifiers:[],scanningForParens:!1,escapeChar:!1,addToMatch:!0,addToUnmatch:e.support.extglobs,dotHandled:!1,i:-1,char:"",nextChar:""}}(e,t,n),i=t.isLast?e.optionalSeparator:e.requiredSeparator;if(r.excludeDot||(s.dotHandled=!0),-1===t.end)return t.isLast&&!t.isFirst?n:x(s,i);if(r.globstar&&"**"===t.source)return x(s,"(?:"+((s.dotHandled?"":D)+e.wildcard+"*?"+i)+")*?");for(;++s.i<=t.end;){if(s.char=s.segment.source[s.i],s.nextChar=s.i<t.end?t.source[s.i+1]:"","\\"===s.char){if(s.i<s.segment.end){s.escapeChar=!0;continue}s.char=""}e=s.pattern,t=s.segment;var o=s.char,a=s.i;if(e.support.brackets&&!s.scanningForParens){if(a>s.openingBracket&&a<=s.closingBracket){s.escapeChar?x(s,E(o)):a===s.closingBracket?(x(s,"]"),s.openingBracket=t.source.length):"-"===o&&a===s.closingBracket-1?x(s,"\\-"):"!"===o&&a===s.openingBracket+1?x(s,"^"):x(s,"]"===o?"\\]":o),s.escapeChar=!1;continue}if(a>s.openingBracket){"]"===o&&!s.escapeChar&&a>s.openingBracket+1&&a>s.closingBracket?(s.closingBracket=a,s.i=s.openingBracket,e.separator?x(s,"(?!"+e.separatorMatcher+")[",!0):x(s,"[",!0)):a===t.end&&(x(s,"\\["),s.i=s.openingBracket,s.openingBracket=t.source.length,s.closingBracket=t.source.length),s.escapeChar=!1;continue}if("["===o&&!s.escapeChar&&a>s.closingBracket&&a<t.end){s.openingBracket=a,s.escapeChar=!1;continue}}if(s.pattern.support.extglobs){var c=s.extglobModifiers,l=(o=s.char,s.nextChar);a=s.i;if("("!==l||s.escapeChar||"@"!==o&&"?"!==o&&"*"!==o&&"+"!==o&&"!"!==o){if(")"!==o||s.escapeChar){if("|"===o&&s.closingParens&&!s.scanningForParens&&!s.escapeChar){x(s,"|");continue}}else if(s.scanningForParens)s.closingParens++;else if(c.length){var p=c.pop();if("!"===p&&-1!==c.indexOf("!"))throw new Error("Nested negated extglobs aren't supported");x(s,")"+(p="!"===p||"@"===p?"":p)),s.addToMatch=!0,s.addToUnmatch=!0,s.closingParens--;continue}}else if(s.scanningForParens)s.openingParens++;else if(a>s.parensHandledUntil&&!s.closingParens)s.parensHandledUntil=a,s.scanningForParens=!0,s.openingParens++;else{if(s.closingParens>=s.openingParens){"!"===o&&(s.addToMatch=!0,s.addToUnmatch=!1,x(s,s.pattern.wildcard+"*?",!0),s.addToMatch=!1,s.addToUnmatch=!0,s.result.useUnmatch=!0),c.push(o),x(s,"(?:",!0),s.openingParens--,s.i++;continue}s.openingParens--}if(s.scanningForParens){s.closingParens!==s.openingParens&&a!==s.segment.end||(s.scanningForParens=!1,s.i=s.parensHandledUntil-1),s.escapeChar=!1;continue}}r=(e=s.pattern).support;!s.escapeChar&&r.star&&"*"===s.char?s.i!==s.segment.end&&"*"===s.nextChar||x(s,e.wildcard+"*?",!0):!s.escapeChar&&r.qMark&&"?"===s.char?x(s,e.wildcard,!0):x(s,E(s.char)),s.escapeChar=!1}return x(s,i)}function P(e,t,n){for(var r=O(e,t,n),s={match:"",unmatch:"",useUnmatch:!1},i=r.segments,o=0;o<i.length;o++){w(r,k(i[o],0,0===o,o===i.length-1),s)}return s.useUnmatch?"(?!^"+s.unmatch+"$)"+s.match:s.match}function C(e,t){if("string"!=typeof t)throw new TypeError("Sample must be a string, but "+typeof t+" given");return e.test(t)}function _(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("The first argument must be a single pattern string or an array of patterns, but "+typeof e+" given");if("string"!=typeof t&&"boolean"!=typeof t||(t={separator:t}),2===arguments.length&&void 0!==t&&("object"!=typeof t||null===t||Array.isArray(t)))throw new TypeError("The second argument must be an options object or a string/boolean separator, but "+typeof t+" given");if("\\"===(t=t||{}).separator)throw new Error("\\ is not a valid separator");var n=function(e,t){e=Array.isArray(e)?e:[e],!1!==t["{}"]&&(e=function(e,t){for(var n=[],r=0;r<e.length;r++)for(var s=t(e[r]),i=0;i<s.length;i++)n.push(s[i]);return n}(e,m));for(var n=[],r=[],s="",i=0;i<e.length;i++){var o=j(e[i],t),a=P(o.pattern,t,!o.isNegated);o.isNegated?r.push(a):n.push(a)}return r.length&&(s="(?!(?:"+r.join("|")+")$)"),n.length>1?s+="(?:"+n.join("|")+")":1===n.length?s+=n[0]:s.length&&(s+=P("**",t,!0)),"^"+s+"$"}(e,t),r=new RegExp(n,t.flags),s=C.bind(null,r);return s.options=t,s.pattern=e,s.regexp=r,s}class B{#e;#t;#n;#r=!1;#s;#i=[];#o=[];#a=[];#c;#l;#p;constructor(t,n){if(!t||!n)return this;this.#e=((t={})=>{const n={enable:!1,accessors:[e.default],propertyDirectory:{scopeKey:":scope",maxDepth:10},assign:"addEventListener",deassign:"removeEventListener",transsign:"dispatchEvent",bindListener:!0,methods:{assign:{addEventListener:function(e,t){const{type:n,listener:r,settings:s}=e,{options:i,useCapture:o}=s;return t.addEventListener(n,r,i||o)},on:function(e,t){const{type:n,listener:r}=e;return t.on(n,r)},once:function(e,t){const{type:n,listener:r}=e;return t.once(n,r)}},deassign:{removeEventListener:function(e,t){const{type:n,listener:r,settings:s}=e,{options:i,useCapture:o}=s;return t.removeEventListener(n,r,i||o)},off:function(e,t){const{type:n,listener:r}=e;return t.off(n,r)}},transsign:{dispatchEvent:function(e,t,n){return t.dispatchEvent(n)},emit:function(e,t,n,...r){return t.emit(n,...r)}}}};for(const[e,r]of Object.entries(t))switch(e){case"propertyDirectory":n[e]=Object.assign(n[e],r);break;case"accessors":n[e]=r,n.propertyDirectory[e]=r;break;case"methods":n[e]=i(n[e],r);break;case"enableEvents":break;default:n[e]=r}return n})(t),this.#t=n,this.enable=this.settings.enable}get settings(){return this.#e}get path(){return this.settings.path}get type(){return this.settings.type}get listener(){if(void 0!==this.#n)return this.#n;const e=this.settings.listener;return!0===this.settings.bindListener?this.#n=e.bind(this.#t):this.#n=e,this.#n}get enable(){return this.#r}set enable(e){if(![!0,!1].includes(e))return;const t=this.#u,n=this.#i,r=this.#o;n.length=0,r.length=0;for(const s of t){const{path:t,target:i,enable:o}=s;this.settings;if(o!==e)if(!0===e)try{this.#g(i),s.enable=e,n.push(s)}catch(e){r.push(s)}else if(!1===e)try{this.#h(i),s.enable=e,r.push(s)}catch(e){n.push(s)}}this.#r=e}get enabled(){return this.#i}get disabled(){return this.#o}get#f(){return this.settings.target}get#u(){const e=this.#a,t=[],n=[];if(this.path===this.settings.propertyDirectory.scopeKey){const t=e.find((e=>e?.path===this.path));void 0!==t?n.push(t):void 0===t&&n.push({path:this.path,target:this.#t,enable:!1})}else if(void 0!==this.#f)for(const t of[].concat(this.#f)){const r=e.find((e=>e?.path===this.path));void 0!==r?n.push(r):void 0===r&&n.push({path:this.path,target:t,enable:!1})}else if("string"===s(this.path)){const r=_(this.path,{separator:"."}),s=this.#d;for(const e of s){!0===r(e)&&t.push(e)}for(const r of t){const t=e.find((e=>e.path===r));let s,i=this.#t;const o=r.split(".");let a=0;for(;a<o.length;){let e=o[a];if(void 0!==i){e:for(const t of this.settings.accessors)if(i=t(i,e),void 0!==i)break e;a++}}void 0!==i&&(s=i===t?.target?t:{path:r,target:i,enable:!1}),void 0!==s&&n.push(s)}"*"===this.path.charAt(0)&&n.unshift({path:null,target:this.#t,enable:!1})}return this.#a=n,this.#a}get#g(){return void 0!==this.#c||(this.#c=this.settings.methods.assign[this.settings.assign].bind(null,this)),this.#c}get#h(){return void 0!==this.#l||(this.#l=this.settings.methods.deassign[this.settings.deassign].bind(null,this)),this.#l}get#b(){return void 0!==this.#p||(this.#p=this.settings.methods.transsign[this.settings.transsign].bind(null,this)),this.#p}get#v(){return this.settings.methods}get#d(){const e=(this.settings.accessors,this.settings.propertyDirectory);return r(this.#t,e)}emit(){const e=this.#u;for(const t of e){const{target:e}=t;this.#b(e,...arguments)}return this}}class T extends EventTarget{static implement=function(e,n){if(!e||!n)return;const r=((e={})=>{const t={events:{},enableEvents:!1,propertyDefinitions:{getEvents:"getEvents",addEvents:"addEvents",removeEvents:"removeEvents",enableEvents:"enableEvents",disableEvents:"disableEvents",reenableEvents:"reenableEvents"}};for(const[n,r]of Object.entries(e))t[n]="propertyDefinitions"===n?Object.assign(t[n],r):r;return t})(n),s=[];return Object.defineProperties(e,{[r.propertyDefinitions.getEvents]:{enumerable:!1,writable:!1,value:function(){if(void 0===arguments[0])return s;const e=[],t=[].concat(arguments[0]);for(const n of t)for(const t of s){let r;e:for(const[e,s]of Object.entries(n)){let n;if(n="listener"===e?t.settings[e]===s:t[e]===s,!1===r)break e;r=n}!0===r&&e.push(t)}return e}},[r.propertyDefinitions.addEvents]:{enumerable:!1,writable:!1,value:function(){if(!arguments.length)return e;let n=t(arguments[0]);for(let t of n){const n={};for(const e of["accessors","assign","deassign","transsign","propertyDirectory"]){const t=r[e];void 0!==t&&(n[e]=t)}i(n,t);const o=new B(n,e);s.push(o)}return e}},[r.propertyDefinitions.removeEvents]:{enumerable:!1,writable:!1,value:function(){const t=e[r.propertyDefinitions.getEvents](arguments[0]);if(0===t.length)return e;let n=s.length-1;for(;n>-1;){const e=s[n];t.includes(e)&&(e.enable=!1,s.splice(n,1)),n--}return e}},[r.propertyDefinitions.enableEvents]:{enumerable:!1,writable:!1,value:function(){const t=e[r.propertyDefinitions.getEvents](arguments[0]);if(0===t.length)return e;for(const e of t)e.enable=!0;return e}},[r.propertyDefinitions.disableEvents]:{enumerable:!1,writable:!1,value:function(){const t=e[r.propertyDefinitions.getEvents](arguments[0]);if(0===t.length)return e;for(const e of t)e.enable=!1;return e}},[r.propertyDefinitions.reenableEvents]:{enumerable:!1,writable:!1,value:function(){const t=e[r.propertyDefinitions.getEvents](arguments[0]);for(const e of t)e.enable=!1,e.enable=!0;return e}}}),r.events&&e[r.propertyDefinitions.addEvents](r.events),!0===r.enableEvents&&e[r.propertyDefinitions.enableEvents](),e};constructor(e={}){return super(),T.implement(this,e)}}export{T as Core,v as Coutil};
//# sourceMappingURL=core-plex.min.js.map
